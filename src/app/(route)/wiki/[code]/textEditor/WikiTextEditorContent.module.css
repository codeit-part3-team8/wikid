/* WikiTextEditor 컨텐츠 스타일 */

/* 기본 에디터 스타일 */
.wikiEditor {
  color: #6b7280;
}

/* 에디터 포커스 시 outline 제거 */
.wikiEditor:focus,
.wikiEditor:focus-visible {
  outline: none !important;
}

/* ProseMirror 에디터 포커스 outline 제거 */
.wikiEditor .ProseMirror:focus,
.wikiEditor .ProseMirror:focus-visible,
.wikiEditor .ProseMirror-focused,
.wikiEditor .ProseMirror-focused:focus-visible {
  outline: none !important;
}

/* 모든 포커스 관련 outline 완전 제거 */
.wikiEditor *:focus,
.wikiEditor *:focus-visible,
.wikiEditor [contenteditable]:focus,
.wikiEditor [contenteditable]:focus-visible {
  outline: none !important;
  -webkit-focus-ring-color: transparent !important;
}

/* 제목 스타일 */
.wikiEditor h1,
.wikiEditor h2,
.wikiEditor h3 {
  color: #6b7280 !important;
  border-bottom: 1px solid #d1d5db !important;
  padding-bottom: 8px !important;
}

.wikiEditor h1 {
  margin-bottom: 16px !important;
  font-size: 1.5rem !important;
  font-weight: 700 !important;
}

.wikiEditor h2 {
  margin-bottom: 12px !important;
  font-size: 1.25rem !important;
  font-weight: 600 !important;
}

.wikiEditor h3 {
  margin-bottom: 8px !important;
  font-size: 1.125rem !important;
  font-weight: 500 !important;
}

/* 텍스트 스타일 */
.wikiEditor p {
  color: #6b7280 !important;
  margin-bottom: 16px !important;
  line-height: 1.6 !important;
}

.wikiEditor strong {
  color: #374151 !important;
  font-weight: 600 !important;
}

.wikiEditor em {
  font-style: italic !important;
}

/* 링크 스타일 */
.wikiEditor a {
  color: #2563eb !important;
  text-decoration: underline !important;
}

/* 리스트 스타일 */
.wikiEditor ul,
.wikiEditor ol {
  margin-bottom: 16px !important;
  margin-left: 20px !important;
}

.wikiEditor ul {
  list-style-type: disc !important;
}

.wikiEditor ol {
  list-style-type: decimal !important;
}

.wikiEditor li {
  margin-bottom: 4px !important;
}

/* 구분선 스타일 */
.wikiEditor hr {
  margin: 12px 0 !important;
  border: none !important;
  border-top: 1px solid #9ca3af !important;
}

/* 인용문 스타일 */
.wikiEditor blockquote {
  border-left: 4px solid #fbbf24 !important;
  padding-left: 16px !important;
  font-style: italic !important;
}

/* 표 스타일 */
.wikiEditor table {
  margin: 16px 0 !important;
  border-collapse: collapse !important;
  border: 1px solid #d1d5db !important;
  text-align: left !important;
  width: auto !important;
}

.wikiEditor th,
.wikiEditor td {
  border: 1px solid #d1d5db !important;
  padding: 12px 16px !important;
  vertical-align: top !important;
  position: relative !important;
  min-width: 60px !important;
  min-height: 40px !important;
  height: auto !important;
}

/* 일반 테이블 셀 내부 단락 처리 */
.wikiEditor th p,
.wikiEditor td p {
  margin: 0 !important;
  min-height: 20px !important;
  line-height: 1.4 !important;
}

.wikiEditor th {
  background-color: #f3f4f6 !important;
  font-weight: 500 !important;
  color: #374151 !important;
}

.wikiEditor td {
  background-color: white !important;
}

.wikiEditor .selectedCell {
  background-color: #e0f2fe !important;
}

/* 이미지 스타일 */
.wikiEditor img {
  max-width: 100% !important;
  width: auto !important;
  height: auto !important;
  margin: 16px 0 !important;
  display: block !important;
  opacity: 1 !important;
  visibility: visible !important;
  position: relative !important;
  z-index: 1 !important;
}

.wikiEditor img[data-drag-handle] {
  cursor: grab !important;
}

.wikiEditor img:hover {
  opacity: 0.9 !important;
}

/* ========== WIKI 텍스트 에디터 전용 스타일 ========== */

/* WikiTextEditor 컨테이너에서 ProseMirror가 editor-style 클래스를 사용하지 않으므로
   위키 전용 스타일을 여기서 직접 정의 */
.wikiEditor .ProseMirror:focus {
  outline: none !important;
  color: none !important;
}

.wikiEditor .ProseMirror {
  height: 100% !important;
  width: 100% !important;
  overflow-y: auto !important;
  box-sizing: border-box !important;
  color: #6b7280 !important;
}

/* ProseMirror 내부 텍스트 스타일 강화 */
.wikiEditor .ProseMirror p {
  color: #6b7280 !important;
  margin: 16px 0 !important;
  line-height: 1.6 !important;
}

.wikiEditor .ProseMirror h1 {
  font-size: 1.5rem !important;
  font-weight: 700 !important;
  margin: 16px 0 !important;
  color: #6b7280 !important;
  border-bottom: 1px solid #d1d5db !important;
  padding-bottom: 8px !important;
}

.wikiEditor .ProseMirror h2 {
  font-size: 1.25rem !important;
  font-weight: 600 !important;
  margin: 12px 0 !important;
  color: #6b7280 !important;
  border-bottom: 1px solid #d1d5db !important;
  padding-bottom: 8px !important;
}

.wikiEditor .ProseMirror h3 {
  font-size: 1.125rem !important;
  font-weight: 500 !important;
  margin: 8px 0 !important;
  color: #6b7280 !important;
  border-bottom: 1px solid #d1d5db !important;
  padding-bottom: 8px !important;
}

.wikiEditor .ProseMirror strong {
  color: #374151 !important;
  font-weight: 600 !important;
}

.wikiEditor .ProseMirror em {
  font-style: italic !important;
}

.wikiEditor .ProseMirror a {
  color: #2563eb !important;
  text-decoration: underline !important;
}

.wikiEditor .ProseMirror ul,
.wikiEditor .ProseMirror ol {
  margin: 16px 0 !important;
  margin-left: 20px !important;
}

.wikiEditor .ProseMirror ul {
  list-style-type: disc !important;
}

.wikiEditor .ProseMirror ol {
  list-style-type: decimal !important;
}

.wikiEditor .ProseMirror li {
  margin-bottom: 4px !important;
}

.wikiEditor .ProseMirror hr {
  margin: 12px 0 !important;
  border: none !important;
  border-top: 1px solid #9ca3af !important;
}

.wikiEditor .ProseMirror blockquote {
  border-left: 4px solid #fbbf24 !important;
  padding-left: 16px !important;
  font-style: italic !important;
}

.wikiEditor .ProseMirror table {
  margin: 16px 0 !important;
  border-collapse: collapse !important;
  border: 1px solid #d1d5db !important;
  text-align: left !important;
  width: auto !important;
}

.wikiEditor .ProseMirror th,
.wikiEditor .ProseMirror td {
  border: 1px solid #d1d5db !important;
  padding: 12px 16px !important;
  vertical-align: top !important;
  position: relative !important;
  min-width: 60px !important;
  min-height: 40px !important;
  height: auto !important;
}

/* 테이블 셀 내부의 빈 단락 처리 */
.wikiEditor .ProseMirror th p,
.wikiEditor .ProseMirror td p {
  margin: 0 !important;
  min-height: 20px !important;
  line-height: 1.4 !important;
}

/* 빈 테이블 셀 처리 */
.wikiEditor .ProseMirror th:empty,
.wikiEditor .ProseMirror td:empty {
  min-height: 40px !important;
}

.wikiEditor .ProseMirror th:empty::before,
.wikiEditor .ProseMirror td:empty::before {
  content: '\00a0' !important; /* 공백 문자 */
  display: inline-block !important;
  width: 100% !important;
  height: 20px !important;
}

.wikiEditor .ProseMirror th {
  background-color: #f3f4f6 !important;
  font-weight: 500 !important;
  color: #374151 !important;
}

.wikiEditor .ProseMirror td {
  background-color: white !important;
}

.wikiEditor .ProseMirror .selectedCell {
  background-color: #e0f2fe !important;
}

/* 이미지 스타일 강화 - 모든 가능한 셀렉터로 이미지 표시 강제 */
.wikiEditor .ProseMirror img,
.wikiEditor img {
  max-width: 100% !important;
  width: auto !important;
  height: auto !important;
  min-height: 20px !important;
  margin: 16px 0 !important;
  display: block !important;
  opacity: 1 !important;
  visibility: visible !important;
  position: relative !important;
  z-index: 999 !important;
  background-color: transparent !important;
  object-fit: contain !important;
  /* 이미지가 로드되지 않거나 숨겨지는 경우 방지 */
  content: normal !important;
  font-size: 0 !important;
}

.wikiEditor .ProseMirror img[data-drag-handle],
.wikiEditor img[data-drag-handle] {
  cursor: grab !important;
}

.wikiEditor .ProseMirror img:hover,
.wikiEditor img:hover {
  opacity: 0.9 !important;
}

/* 이미지가 숨겨지지 않도록 추가 보장 */
.wikiEditor [data-type='image'],
.wikiEditor .ProseMirror [data-type='image'],
.wikiEditor .ProseMirror > img,
.wikiEditor .ProseMirror p > img {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  height: auto !important;
  width: auto !important;
}

/* base64 이미지는 일반 이미지 스타일로 통합 처리 */

/* 이미지 로딩 실패 시에도 공간 확보 */
.wikiEditor img::before {
  content: '이미지' !important;
  display: block !important;
  width: 100px !important;
  height: 50px !important;
  background: #f3f4f6 !important;
  text-align: center !important;
  line-height: 50px !important;
  color: #6b7280 !important;
}

/* 위키 에디터 전용 플레이스홀더 */
.wikiEditor p.is-editor-empty:first-child::before {
  color: #d1d5db !important;
  font-size: 20px !important;
  content: attr(data-placeholder) !important;
  float: left !important;
  height: 0 !important;
  pointer-events: none !important;
}

@media (max-width: 768px) {
  .wikiEditor p.is-editor-empty:first-child::before {
    font-size: 16px !important;
  }
}

/* 위키 에디터 전용 스크롤바 */
.wikiEditor .ProseMirror::-webkit-scrollbar {
  width: 4px !important;
}

.wikiEditor .ProseMirror::-webkit-scrollbar-track {
  background: #f1f1f1 !important;
  border-radius: 4px !important;
}

.wikiEditor .ProseMirror::-webkit-scrollbar-thumb {
  background-color: #d1d5db !important;
  border-radius: 8px !important;
  cursor: pointer !important;
}

.wikiEditor .ProseMirror::-webkit-scrollbar-track {
  background-color: transparent !important;
}
